<div class="home-page">
  <!-- Use the shared header component -->
  <app-header></app-header>

  <!-- Hero Section -->
  <section class="home-page__hero">
    <div class="home-page__hero-background">
      <div class="home-page__hero-overlay"></div>
    </div>

    <div class="home-page__hero-content">
      <h1 class="home-page__hero-title">Achar um rolê nunca foi tão fácil.</h1>
      <p class="home-page__hero-subtitle">
        <!-- {{ getUserWelcomeMessage() }} E hoje é aonde? -->Chega de tédio. A
        resenha perfeita está a um clique de distância.
      </p>
    </div>
  </section>

  <!-- Search Section -->
  <section class="home-page__search-section">
    <div class="home-page__container">
      <!-- Header section similar to picos-list -->
      <div class="header">
        <h1>Festas</h1>
        <div class="header-actions">
          <a routerLink="/mapa" class="btn-map-picos">
            <i class="bi bi-map"></i> Mapa de Festas
          </a>
          <a routerLink="/criar-evento" class="btn-add-pico">
            <i class="bi bi-plus-lg"></i> Adicionar Festa
          </a>
        </div>
      </div>
      
      <div class="home-page__search-wrapper">
        <div class="home-page__search-input">
          <app-search-bar (searchChange)="onSearch($event)" (clearSearch)="onClearSearch()">
          </app-search-bar>
        </div>

        <div class="home-page__search-filters">
          <select class="home-page__filter-select">
            <option value="all">All Events</option>
            <option value="music">Music</option>
            <option value="party">Party</option>
            <option value="festival">Festival</option>
          </select>

          <select class="home-page__filter-select">
            <option value="newest">Newest</option>
            <option value="oldest">Oldest</option>
            <option value="popular">Popular</option>
          </select>

          <!-- Removed the map button as requested -->
        </div>
      </div>
    </div>
  </section>

  <!-- Events Carousel Section -->
  <section class="home-page__events-carousel" *ngIf="!isLoading && hasEvents()">
    <div class="home-page__container">
      <h2 class="home-page__section-title">Eventos Recentes</h2>

      <div class="home-page__carousel-wrapper">
        <!-- Removendo botões de navegação e substituindo por carrossel arrastável -->
        <div class="home-page__carousel home-page__carousel--snap">
          <div class="home-page__carousel-slide" *ngFor="let event of events; let i = index">
            <div class="home-page__event-card">
              <div class="home-page__event-image">
                <img [src]="event.imageUrl || 'assets/default-event.jpg'" [alt]="event.eventName"
                  class="home-page__event-img" />
                <div class="home-page__event-date">
                  <span class="home-page__event-day">{{
                    getEventDay(event.eventDate)
                    }}</span>
                  <span class="home-page__event-month">{{
                    getEventMonth(event.eventDate)
                    }}</span>
                  <span class="home-page__event-year">{{
                    getEventYear(event.eventDate)
                    }}</span>
                </div>
              </div>

              <div class="home-page__event-info">
                <h3 class="home-page__event-title">{{ event.eventName }}</h3>
                <div class="home-page__event-details">
                  <p class="home-page__event-location">
                    <i class="bi bi-geo-alt-fill"></i>
                    {{ event.location.city }} • {{ event.eventTime }}
                  </p>
                </div>

                <div class="home-page__event-actions">
                  <button class="home-page__btn home-page__btn--primary" (click)="buyTicket(event.eventId)">
                    Buy Ticket
                  </button>
                  <button class="home-page__btn home-page__btn--secondary" (click)="viewEventDetails(event.eventId)">
                    More Info
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Loading State -->
  <section class="home-page__loading" *ngIf="isLoading">
    <div class="home-page__container">
      <div class="home-page__loading-grid">
        <div class="home-page__skeleton" *ngFor="let i of [1, 2, 3, 4, 5, 6]">
          <div class="home-page__skeleton-card">
            <div class="home-page__skeleton-image"></div>
            <div class="home-page__skeleton-content">
              <div class="home-page__skeleton-line"></div>
              <div class="home-page__skeleton-line home-page__skeleton-line--short"></div>
              <div class="home-page__skeleton-buttons"></div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Empty State -->
  <section class="home-page__empty" *ngIf="!isLoading && !hasEvents()">
    <div class="home-page__container">
      <div class="home-page__empty-content">
        <div class="home-page__empty-icon">
          <i class="bi bi-calendar-x"></i>
        </div>
        <h3 class="home-page__empty-title">
          {{
          isSearching
          ? "Nenhum evento encontrado"
          : "Nenhum evento disponível"
          }}
        </h3>
        <p class="home-page__empty-message">
          {{
          isSearching
          ? "Tente buscar com termos diferentes ou explore eventos em outras regiões."
          : "Seja o primeiro a criar um evento incrível na sua região!"
          }}
        </p>
        <a *ngIf="!isSearching" class="home-page__btn home-page__btn--primary" routerLink="/criar-evento">
          Criar Primeiro Evento
        </a>
      </div>
    </div>
  </section>

  <!-- Use the shared footer component -->
  <app-footer></app-footer>

  <!-- Floating Action Buttons (Mobile) -->
  <div class="home-page__fab">
    <button class="home-page__fab-btn home-page__fab-btn--secondary" routerLink="/mapa" title="Ver Mapa">
      <i class="bi bi-map"></i>
    </button>
    <button class="home-page__fab-btn" routerLink="/criar-evento" title="Criar Evento">
      <i class="bi bi-plus-lg"></i>
    </button>
  </div>
</div>